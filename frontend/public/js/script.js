"use strict";if(String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),window.onload=function(e,o){function t(){var e=window.pageYOffset,t=document.querySelector("header");0!==e?t.classList.contains("header--fixed")||t.classList.add("header--fixed"):t.classList.contains("header--fixed")&&t.classList.remove("header--fixed")}window.addEventListener("scroll",function(){t()}),t();var n=document.querySelector("header");if(document.querySelector(".header_menu_switcher ").onclick=function(){n.classList.contains("header--open")?(n.classList.remove("header--open"),document.body.style.overflow=""):(n.classList.add("header--open"),document.body.style.overflow="hidden")},document.querySelector(".home_slider"))new Swiper(".home_slider",{loop:!0,slidesPerView:"auto",spaceBetween:30,centeredSlides:!0,slideToClickedSlide:!0,pagination:{el:".home_slider_pagination",clickable:!0},breakpoints:{576:{}}});if(document.querySelector(".locations_slider"))new Swiper(".locations_slider",{loop:!0,slidesPerView:1,centeredSlides:!0,spaceBetween:30,pagination:{el:".locations_slider_pagination",clickable:!0},on:{slideChange:function(){var e=document.querySelector(".swiper-slide-active");window.openMarkerBaloon(e.getAttribute("data-id"))}}});function a(e,t){for(var o,n=(o=e,Array.prototype.slice.call(o.elements).reduce(function(e,t){var o={type:t.type,name:t.name,value:t.value};if(-1!==["checkbox","radio"].indexOf(t.type))o.checked=t.checked;else if("select-multiple"===t.type){o.value=[];for(var n=0;n<t.length;n++)o.value.push({value:t.options[n].value,selected:t.options[n].selected})}return o.name&&e.push(o),e},[])),a={},r=0;r<n.length;r++)a[n[r].name]=n[r].value;var i=new XMLHttpRequest;i.open("POST",{vacancy_form:"/api/v1/vacancy/",feedback_form:"/api/v1/feedback/"}[t],!0),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&(200===this.status?Toastify({text:"Данные успешно отправлены",close:!1,gravity:"top",position:"center",backgroundColor:"#99d99e",stopOnFocus:!0,className:"toastify_message"}).showToast():Toastify({text:"Произошла ошибка на сервере",close:!1,gravity:"top",position:"center",backgroundColor:"#ffb2b2",stopOnFocus:!0,className:"toastify_message"}).showToast())},i.onerror=function(){Toastify({text:"Произошла непредвиденная ошибка",close:!1,gravity:"top",position:"center",backgroundColor:"#ffb2b2",stopOnFocus:!0,className:"toastify_message"}).showToast()},i.send(JSON.stringify(a))}var r=document.querySelectorAll("form");if(r.length)for(var i=function(t){r[t].addEventListener("submit",function(e){e.preventDefault(),new Wellidate(r[t],o).form()&&a(r[t],r[t].getAttribute("data-type"))},!1)},s=0;s<r.length;s++)i(s);var c=document.querySelectorAll("[data-phone]");if(c.length)for(var l=function(n){c[n].oninput=function(e){if(e.isTrusted){var t=this.value.replace(/\D/g,"").match(/([0-9])(\d{0,3})(\d{0,3})(\d{0,4})/);null!==t&&(this.value=t[2]?t[1]+(t[3]?"("+t[2]+") "+t[3]+(t[4]?"-"+t[4]:""):t[2]):t[1]);var o=document.createEvent("Event");o.initEvent("input",!1,!0),c[n].dispatchEvent(o)}}},d=0;d<c.length;d++)l(d);var p=document.querySelectorAll(".locations_list_item");if(p.length)for(var u=function(t){p[t].onclick=function(){var e=p[t].getAttribute("data-id");window.openMarkerBaloon(e)}},f=0;f<p.length;f++)u(f)},window.ymaps){var myMap,objectManager,init=function(){myMap=new ymaps.Map("map",{center:[53.500068,49.273561],zoom:17,controls:["zoomControl","searchControl","fullscreenControl"]},{searchControlProvider:"yandex#search"}),(objectManager=new ymaps.ObjectManager({clusterize:!0,gridSize:32,clusterDisableClickZoom:!0})).objects.options.set("preset","twirl#redIcon"),objectManager.objects.options.set("iconColor","#ff0000"),objectManager.clusters.options.set("preset","islands#redClusterIcons"),myMap.geoObjects.add(objectManager);objectManager.add({type:"FeatureCollection",features:[{type:"Feature",id:0,test:"Юбилейная",geometry:{type:"Point",coordinates:[53.500064,49.273558]},properties:{balloonContent:"<p><b>Drive Coffee Vega</b></p><p>ул. Юбилейная, 40г</p>",clusterCaption:"cluster_1",hintContent:"Drive Coffee Vega"},options:{iconColor:"#ff0000"}},{type:"Feature",id:1,test:"Коммунистическая",geometry:{type:"Point",coordinates:[53.472816,49.478163]},properties:{balloonContent:"<p><b>Drive Coffee Komsa</b></p><p>ул. Коммунистическая, 92г</p>",clusterCaption:"cluster_1",hintContent:"Drive Coffee Komsa"},options:{iconColor:"#ff0000"}},{type:"Feature",id:2,test:"Автозаводское",geometry:{type:"Point",coordinates:[53.539356,49.390381]},properties:{balloonContent:"<p><b>Drive Coffee ParkHouse/Lime</b></p><p>ул. Автозаводское шоссе, 10</p>",clusterCaption:"cluster_1",hintContent:"Drive Coffee ParkHouse/Lime"},options:{iconColor:"#ff0000"}},{type:"Feature",id:3,test:"Набережная",geometry:{type:"Point",coordinates:[53.501852,49.25238]},properties:{balloonContent:"<p><b>Drive Coffee Naba</b></p><p>Работаем с мая по август</p>",clusterCaption:"cluster_1",hintContent:"Drive Coffee Naba"},options:{iconColor:"#ff0000"}}]}),window.openMarkerBaloon(0)},openMarkerBaloon=function(e){var t=window.objectManager.getObjectState(e);t.isClustered?(window.objectManager.clusters.state.set("activeObject",window.objectManager.objects.getById(e)),window.objectManager.clusters.balloon.open(t.cluster.id)):window.objectManager.objects.balloon.open(e)};ymaps.ready(init)}
//# sourceMappingURL=../maps/script.js.map
