{"version":3,"sources":["script.js"],"names":["scrollToElement","className","errorInputOffset","parseInt","document","querySelector","concat","getBoundingClientRect","top","window","pageYOffset","scrollTo","String","prototype","startsWith","searchString","position","onload","container","options","offsetTop","checkFixedHeader","header","classList","contains","add","addEventListener","onclick","menu_switcher","body","remove","Swiper","loop","homeSlider","slidesPerView","home_slider","spaceBetween","centeredSlides","slideToClickedSlide","pagination","clickable","576","locationsSlider","el","slide_id","on","openMarkerBaloon","getAttribute","submitForm","cookies","length","form","data","Array","slice","call","elements","reduce","acc","cur","serializeForm","type","name","value","elem","i","push","selected","dataJSON","request","XMLHttpRequest","csrftoken","vacancy_form","feedback_form","substring","id","setRequestHeader","pathList","location","protocol","replace","onreadystatechange","this","readyState","DONE","status","Toastify","text","close","backgroundColor","stopOnFocus","gravity","onerror","showToast","send","JSON","stringify","cookieValue","cookie","split","decodeURIComponent","getCookie","querySelectorAll","_loop","event","formList","phoneList","e","isTrusted","x","match","Wellidate","initEvent","dispatchEvent","_loop2","locationsList","_loop3","oninput","video","ymaps","myMap","objectManager","Map","center","zoom","controls","searchControlProvider","clusterize","gridSize","clusterDisableClickZoom","objects","set","clusters","coordinates","properties","geometry","balloonContent","clusterCaption","hintContent","iconColor","objectState","getObjectState","isClustered","state","getById","cluster","balloon","open","ready","init"],"mappings":"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","file":"../js/script.js","sourcesContent":["if (!String.prototype.startsWith) {\r\n\tString.prototype.startsWith = function(searchString, position) {\r\n\t\tposition = position || 0;\r\n\t\treturn this.indexOf(searchString, position) === position;\r\n\t};\r\n}\r\n\r\nfunction scrollToElement(className) {\r\n\tconst errorInputOffset = parseInt(document.querySelector(`.${className}`).getBoundingClientRect().top + window.pageYOffset - 70);\r\n\twindow.scrollTo({\r\n\t\ttop: errorInputOffset,\r\n\t\tleft: 0,\r\n\t\tbehavior: 'smooth'\r\n\t});\r\n}\r\n\r\nwindow.onload = function (container, options) {\r\n\r\n\tfunction checkFixedHeader() {\r\n\t\tconst offsetTop = window.pageYOffset,\r\n\t\t\theader = document.querySelector('header');\r\n\t\tif(offsetTop !== 0) {\r\n\t\t\tif(!header.classList.contains('header--fixed')) header.classList.add('header--fixed');\r\n\t\t} else {\r\n\t\t\tif(header.classList.contains('header--fixed')) header.classList.remove('header--fixed');\r\n\t\t}\r\n\t}\r\n\t// изменение стилей хэдера при скролле\r\n\twindow.addEventListener('scroll', function() {\r\n\t\tcheckFixedHeader();\r\n\t});\r\n\r\n\tcheckFixedHeader();\r\n\r\n\t// переключатель мобильной версии\r\n\tconst header = document.querySelector('header'),\r\n\t\t\t\tmenu_switcher = document.querySelector('.header_menu_switcher ');\r\n\r\n\tmenu_switcher.onclick = () => {\r\n\t\tif(header.classList.contains('header--open')) {\r\n\t\t\theader.classList.remove('header--open');\r\n\t\t\tdocument.body.style.overflow = '';\r\n\t\t} else {\r\n\t\t\theader.classList.add('header--open');\r\n\t\t\tdocument.body.style.overflow = 'hidden';\r\n\t\t}\r\n\t};\r\n\r\n\t// слайдер на главной\r\n\tconst homeSlider = document.querySelector('.home_slider');\r\n\tif(homeSlider) {\r\n\t\tconst home_slider = new Swiper('.home_slider', {\r\n\t\t\tloop: true,\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tslideToClickedSlide: true,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.home_slider_pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t576: {}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// слайдер локации\r\n\tconst locationsSlider = document.querySelector('.locations_slider');\r\n\tif(locationsSlider) {\r\n\t\tconst home_slider = new Swiper('.locations_slider', {\r\n\t\t\tloop: true,\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.locations_slider_pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\ton: {\r\n\t\t\t\tslideChange: () => {\r\n\t\t\t\t\tconst slide_id = document.querySelector('.swiper-slide-active');\r\n\t\t\t\t\twindow.openMarkerBaloon(slide_id.getAttribute('data-id'));\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\t// валидация и отправка форм\r\n\tconst serializeForm = (form) => {\r\n\t\treturn Array.prototype.slice.call(form.elements) // convert form elements to array\r\n\t\t\t.reduce(function(acc,cur){   // reduce\r\n\t\t\t\tlet elem = {type : cur.type, name : cur.name, value : cur.value}; // get needed keys\r\n\t\t\t\tif(['checkbox','radio'].indexOf(cur.type) !==-1){\r\n\t\t\t\t\telem.checked = cur.checked;\r\n\t\t\t\t} else if(cur.type === 'select-multiple'){\r\n\t\t\t\t\telem.value=[];\r\n\t\t\t\t\tfor(let i = 0;i < cur.length;i++){\r\n\t\t\t\t\t\telem.value.push({\r\n\t\t\t\t\t\t\tvalue : cur.options[i].value,\r\n\t\t\t\t\t\t\tselected : cur.options[i].selected\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(elem.name) acc.push(elem);\r\n\t\t\t\treturn acc;\r\n\t\t\t},[]);\r\n\t};\r\n\r\n\t// парсинг Cookie\r\n\tfunction getCookie(name) {\r\n\t\tlet cookieValue = null;\r\n\t\tif (document.cookie && document.cookie !== '') {\r\n\t\t\tlet cookies = document.cookie.split(';');\r\n\t\t\tfor (let i = 0; i < cookies.length; i++) {\r\n\t\t\t\tlet cookie = cookies[i].trim();\r\n\t\t\t\tif (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n\t\t\t\t\tcookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cookieValue;\r\n\t}\r\n\r\n\tconst csrftoken = getCookie('csrftoken');\r\n\r\n\tconst submitForm = function (form, id) {\r\n\t\tconst pathList = {\r\n\t\t\t\t\t\t'vacancy_form': '/api/v1/vacancy/',\r\n\t\t\t\t\t\t'feedback_form': '/api/v1/feedback/'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata = serializeForm(form),\r\n\t\t\t\t\tdataJSON = {};\r\n\r\n\t\tfor(let i = 0; i < data.length; i++) {\r\n\t\t\tdataJSON[data[i].name] = data[i].value;\r\n\t\t}\r\n\r\n\t\tconst request = new XMLHttpRequest();\r\n\t\trequest.open('POST', pathList[id], true);\r\n\t\trequest.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\r\n\t\trequest.setRequestHeader('X-CSRFToken', csrftoken);\r\n\t\trequest.setRequestHeader('X-Forwarded-Proto', location.protocol.replace(':', ''));\r\n\r\n\t\trequest.onreadystatechange = function() {\r\n\t\t\tif (this.readyState === XMLHttpRequest.DONE) {\r\n\t\t\t\tif(this.status === 200) {\r\n\t\t\t\t\tToastify({\r\n\t\t\t\t\t\ttext: 'Данные успешно отправлены',\r\n\t\t\t\t\t\tclose: false,\r\n\t\t\t\t\t\tgravity: 'top',\r\n\t\t\t\t\t\tposition: 'center',\r\n\t\t\t\t\t\tbackgroundColor: '#99d99e',\r\n\t\t\t\t\t\tstopOnFocus: true,\r\n\t\t\t\t\t\tclassName: 'toastify_message',\r\n\t\t\t\t\t}).showToast();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tToastify({\r\n\t\t\t\t\t\ttext: 'Произошла ошибка на сервере',\r\n\t\t\t\t\t\tclose: false,\r\n\t\t\t\t\t\tgravity: 'top',\r\n\t\t\t\t\t\tposition: 'center',\r\n\t\t\t\t\t\tbackgroundColor: '#ffb2b2',\r\n\t\t\t\t\t\tstopOnFocus: true,\r\n\t\t\t\t\t\tclassName: 'toastify_message',\r\n\t\t\t\t\t}).showToast();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\trequest.onerror = function() {\r\n\t\t\tToastify({\r\n\t\t\t\ttext: 'Произошла непредвиденная ошибка',\r\n\t\t\t\tclose: false,\r\n\t\t\t\tgravity: 'top',\r\n\t\t\t\tposition: 'center',\r\n\t\t\t\tbackgroundColor: '#ffb2b2',\r\n\t\t\t\tstopOnFocus: true,\r\n\t\t\t\tclassName: 'toastify_message',\r\n\t\t\t}).showToast();\r\n\t\t};\r\n\r\n\t\trequest.send(JSON.stringify(dataJSON));\r\n\t};\r\n\r\n\tconst formList = document.querySelectorAll('form');\r\n\r\n\tif(formList.length) {\r\n\t\tfor(let i = 0; i < formList.length; i++) {\r\n\t\t\tformList[i].addEventListener('submit', (event) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif (new Wellidate(formList[i], options).form()) {\r\n\t\t\t\t\tsubmitForm(formList[i], formList[i].getAttribute('data-type'));\r\n\t\t\t\t}\r\n\t\t\t}, false)\r\n\t\t}\r\n\t}\r\n\r\n\t// маска для телефона\r\n\tconst phoneList = document.querySelectorAll('[data-phone]');\r\n\tif(phoneList.length) {\r\n\t\tfor(let i = 0; i < phoneList.length; i++) {\r\n\t\t\tphoneList[i].oninput = function(e) {\r\n\t\t\t\tif (!e.isTrusted) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet x = this.value.replace(/\\D/g, '').match(/([0-9])(\\d{0,3})(\\d{0,3})(\\d{0,4})/);\r\n\t\t\t\tif(x !== null) this.value = !x[2] ? x[1] : x[1] + ( !x[3] ? x[2] : '(' + x[2] + ') ' + x[3] + (x[4] ? '-' + x[4] : ''));\r\n\t\t\t\tlet event = document.createEvent('Event');\r\n\t\t\t\tevent.initEvent('input', false, true);\r\n\t\t\t\t// args: string type, boolean bubbles, boolean cancelable\r\n\t\t\t\tphoneList[i].dispatchEvent(event);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// переключение карты\r\n\tconst locationsList = document.querySelectorAll('.locations_list_item');\r\n\tif(locationsList.length) {\r\n\t\tfor(let i = 0; i < locationsList.length; i++) {\r\n\t\t\tlocationsList[i].onclick = () => {\r\n\t\t\t\tconst id = locationsList[i].getAttribute('data-id');\r\n\t\t\t\twindow.openMarkerBaloon(id);\r\n\t\t\t\tscrollToElement('map-container');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst video = document.querySelector('.banner_video');\r\n\t// Parallax(element, speed, direction)\r\n\tif(video) {\r\n\t\tnew Parallax(video, 2, true);\r\n\t}\r\n};\r\n\r\n//Yandex maps\r\nif(window.ymaps) {\r\n\tlet myMap, objectManager;\r\n\r\n\tconst openMarkerBaloon = (id) => {\r\n\t\tconst objectState = window.objectManager.getObjectState(id);\r\n\t\tif (objectState.isClustered) {\r\n\t\t\twindow.objectManager.clusters.state.set('activeObject', window.objectManager.objects.getById(id));\r\n\t\t\twindow.objectManager.clusters.balloon.open(objectState.cluster.id);\r\n\t\t} else {\r\n\t\t\twindow.objectManager.objects.balloon.open(id);\r\n\t\t}\r\n\t};\r\n\r\n\tymaps.ready(init);\r\n\r\n\tfunction init () {\r\n\t\tmyMap = new ymaps.Map('map', {\r\n\t\t\tcenter: [53.500068, 49.273561],\r\n\t\t\tzoom: 17,\r\n\t\t\tcontrols: ['zoomControl', 'searchControl', 'fullscreenControl']\r\n\t\t}, {\r\n\t\t\tsearchControlProvider: 'yandex#search'\r\n\t\t});\r\n\r\n\t\tobjectManager = new ymaps.ObjectManager({\r\n\t\t\tclusterize: true,\r\n\t\t\tgridSize: 32,\r\n\t\t\tclusterDisableClickZoom: true\r\n\t\t});\r\n\t\tobjectManager.objects.options.set('preset', 'twirl#redIcon');\r\n\t\tobjectManager.objects.options.set('iconColor', '#ff0000');\r\n\t\tobjectManager.clusters.options.set('preset', 'islands#redClusterIcons');\r\n\t\tmyMap.geoObjects.add(objectManager);\r\n\t\tconst data = {\r\n\t\t\t\"type\": \"FeatureCollection\",\r\n\t\t\t\"features\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"type\": \"Feature\",\r\n\t\t\t\t\t\"id\": 0,\r\n\t\t\t\t\t\"geometry\": {\"type\": \"Point\", \"coordinates\": [53.497424, 49.293479]},\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"balloonContent\": \"<p><b>Drive Coffee Concept Bar</b></p><p>ул. Спортивная, 1и</p>\",\r\n\t\t\t\t\t\t\"clusterCaption\": \"cluster_1\",\r\n\t\t\t\t\t\t\"hintContent\": \"Drive Coffee Concept Bar\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"options\": {\r\n\t\t\t\t\t\t\"iconColor\": \"#ff0000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"type\": \"Feature\",\r\n\t\t\t\t\t\"id\": 1,\r\n\t\t\t\t\t\"geometry\": {\"type\": \"Point\", \"coordinates\": [53.500064, 49.273558]},\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"balloonContent\": \"<p><b>Drive Coffee Vega</b></p><p>ул. Юбилейная, 40г</p>\",\r\n\t\t\t\t\t\t\"clusterCaption\": \"cluster_1\",\r\n\t\t\t\t\t\t\"hintContent\": \"Drive Coffee Vega\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"options\": {\r\n\t\t\t\t\t\t\"iconColor\": \"#ff0000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"type\": \"Feature\",\r\n\t\t\t\t\t\"id\": 2,\r\n\t\t\t\t\t\"geometry\": {\"type\": \"Point\", \"coordinates\": [53.472816, 49.478163]},\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"balloonContent\": \"<p><b>Drive Coffee Komsa</b></p><p>ул. Коммунистическая, 92г</p>\",\r\n\t\t\t\t\t\t\"clusterCaption\": \"cluster_1\",\r\n\t\t\t\t\t\t\"hintContent\": \"Drive Coffee Komsa\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"options\": {\r\n\t\t\t\t\t\t\"iconColor\": \"#ff0000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"type\": \"Feature\",\r\n\t\t\t\t\t\"id\": 3,\r\n\t\t\t\t\t\"geometry\": {\"type\": \"Point\", \"coordinates\": [53.510417, 49.410619]},\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"balloonContent\": \"<p><b>Drive Coffee Zhilina</b></p><p>ул. Жилина, 9</p>\",\r\n\t\t\t\t\t\t\"clusterCaption\": \"cluster_1\",\r\n\t\t\t\t\t\t\"hintContent\": \"Drive Coffee Zhilina\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"options\": {\r\n\t\t\t\t\t\t\"iconColor\": \"#ff0000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"type\": \"Feature\",\r\n\t\t\t\t\t\"id\": 4,\r\n\t\t\t\t\t\"geometry\": {\"type\": \"Point\", \"coordinates\": [53.539356, 49.390381]},\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"balloonContent\": \"<p><b>Drive Coffee ParkHouse/Lime</b></p><p>ул. Автозаводское шоссе, 10в</p>\",\r\n\t\t\t\t\t\t\"clusterCaption\": \"cluster_1\",\r\n\t\t\t\t\t\t\"hintContent\": \"Drive Coffee ParkHouse/Lime\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"options\": {\r\n\t\t\t\t\t\t\"iconColor\": \"#ff0000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"type\": \"Feature\",\r\n\t\t\t\t\t\"id\": 5,\r\n\t\t\t\t\t\"geometry\": {\"type\": \"Point\", \"coordinates\": [53.510958, 49.275073]},\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"balloonContent\": \"<p><b>Drive Coffee Park</b></p><p>Парк Победы Автозаводского района</p>\",\r\n\t\t\t\t\t\t\"clusterCaption\": \"cluster_1\",\r\n\t\t\t\t\t\t\"hintContent\": \"Drive Coffee Park\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"options\": {\r\n\t\t\t\t\t\t\"iconColor\": \"#ff0000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"type\": \"Feature\",\r\n\t\t\t\t\t\"id\": 6,\r\n\t\t\t\t\t\"geometry\": {\"type\": \"Point\", \"coordinates\": [53.501852, 49.252380]},\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"balloonContent\": \"<p><b>Drive Coffee Naba</b></p><p>Набережная 6 квартала</p>\",\r\n\t\t\t\t\t\t\"clusterCaption\": \"cluster_1\",\r\n\t\t\t\t\t\t\"hintContent\": \"Drive Coffee Naba\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"options\": {\r\n\t\t\t\t\t\t\"iconColor\": \"#ff0000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"type\": \"Feature\",\r\n\t\t\t\t\t\"id\": 7,\r\n\t\t\t\t\t\"geometry\": {\"type\": \"Point\", \"coordinates\": [53.522170, 49.414788]},\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"balloonContent\": \"<p><b>Drive Coffee</b></p>\",\r\n\t\t\t\t\t\t\"clusterCaption\": \"cluster_1\",\r\n\t\t\t\t\t\t\"hintContent\": \"Drive Coffee\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"options\": {\r\n\t\t\t\t\t\t\"iconColor\": \"#ff0000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tobjectManager.add(data);\r\n\r\n\t\twindow.openMarkerBaloon(0);\r\n\t}\r\n}\r\n"]}